# Project Structure & Boundaries

## Complete Project Directory Structure

Since this is a **brownfield integration** into the existing gastown Go CLI tool, the structure shows:
- Existing gastown architecture (high-level summary)
- New crosstown packages (detailed)
- Modified/extended files
- New test and configuration infrastructure

```
gastown/
├── cmd/
│   └── gt/
│       └── main.go                          # [EXISTING] Entry point (unchanged)
│
├── internal/                                 # [EXISTING] All implementation code (58 packages)
│   │
│   ├── cmd/                                  # [EXISTING] CLI commands (50+ existing)
│   │   ├── crosstown.go                     # [NEW] Crosstown command group
│   │   ├── mayor.go                         # [MODIFIED] Add crosstown dashboard panel
│   │   └── ...                              # [EXISTING] Other 50+ commands
│   │
│   ├── ilp/                                  # [NEW PACKAGE] ILP/BTP protocol implementation
│   │   ├── client.go                        # BTP WebSocket client (connector communication)
│   │   ├── client_test.go                   # Unit tests (gomock)
│   │   ├── rpc.go                           # Base Sepolia RPC client (HTTP)
│   │   ├── rpc_test.go                      # RPC tests
│   │   ├── spsp.go                          # SPSP handshake handler
│   │   ├── spsp_test.go                     # SPSP tests
│   │   ├── types.go                         # ILP types, constants, errors
│   │   ├── integration_test.go              # Integration tests (build tag: integration)
│   │   └── mocks/
│   │       └── mock_connector_client.go     # Generated by gomock
│   │
│   ├── nostr/                                # [NEW PACKAGE] NIP-01 WebSocket + TOON
│   │   ├── relay.go                         # NIP-01 WebSocket client (relay communication)
│   │   ├── relay_test.go                    # Unit tests (gomock)
│   │   ├── encoding.go                      # TOON encoding (using toon-go fork)
│   │   ├── encoding_test.go                 # TOON encoding tests
│   │   ├── types.go                         # Nostr types, event kinds, filters
│   │   ├── integration_test.go              # Integration tests (relay + events)
│   │   └── mocks/
│   │       └── mock_relay_client.go         # Generated by gomock
│   │
│   ├── crosstown/                            # [NEW PACKAGE] Integration layer
│   │   ├── channel_manager.go               # Payment channel state management
│   │   ├── channel_manager_test.go          # Channel manager tests
│   │   ├── job_tracker.go                   # Job correlation tracker (git-backed)
│   │   ├── job_tracker_test.go              # Job correlation tests
│   │   ├── wallet.go                        # Wallet, Argon2 key derivation
│   │   ├── wallet_test.go                   # Wallet tests
│   │   ├── config.go                        # Configuration structs, validation
│   │   ├── config_test.go                   # Configuration tests
│   │   ├── types.go                         # Crosstown types, constants, errors
│   │   ├── e2e_test.go                      # E2E tests (full flow with containers)
│   │   └── testdata/
│   │       ├── channel_state.toml           # Test fixture
│   │       └── encrypted_key.txt            # Test fixture
│   │
│   ├── mayor/                                # [EXISTING] Mayor orchestration
│   │   ├── dashboard.go                     # [MODIFIED] Add crosstown panel (Bubbletea)
│   │   ├── dashboard_crosstown.go           # [NEW] Crosstown panel UI logic
│   │   ├── dashboard_crosstown_test.go      # [NEW] Crosstown panel tests
│   │   ├── skills/                          # [EXISTING] Skills system (unchanged)
│   │   └── ...                              # [EXISTING] Other mayor components
│   │
│   └── ...                                   # [EXISTING] Other 53 packages (unchanged)
│
├── docs/                                     # [EXISTING] Documentation (42+ docs)
│   ├── crosstown-integration.md             # [NEW] Crosstown integration guide
│   └── ...                                  # [EXISTING] Other docs
│
├── .github/
│   └── workflows/
│       ├── ci.yml                           # [MODIFIED] Add crosstown integration tests
│       └── ...                              # [EXISTING] Other 9 workflows
│
├── docker-compose.test.yml                   # [NEW] Crosstown containers for E2E tests
├── Dockerfile.e2e                            # [MODIFIED] Add crosstown relay + connector
│
├── go.mod                                    # [MODIFIED] Add dependencies:
├── go.sum                                    #   - github.com/gorilla/websocket
│                                             #   - github.com/ALLiDoizCode/toon-go
│                                             #   - golang.org/x/crypto/argon2
│                                             #   - github.com/golang/mock (test only)
│
├── Makefile                                  # [MODIFIED] Add crosstown test targets
├── README.md                                 # [EXISTING] No changes needed
└── ...                                       # [EXISTING] Other root files
